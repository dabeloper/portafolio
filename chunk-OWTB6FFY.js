var gn=Object.create;var ie=Object.defineProperty,bn=Object.defineProperties,_n=Object.getOwnPropertyDescriptor,En=Object.getOwnPropertyDescriptors,In=Object.getOwnPropertyNames,Ge=Object.getOwnPropertySymbols,Xe=Object.getPrototypeOf,Ye=Object.prototype.hasOwnProperty,yn=Object.prototype.propertyIsEnumerable,wn=Reflect.get;var Je=(t,e,n)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e)=>{for(var n in e||={})Ye.call(e,n)&&Je(t,n,e[n]);if(Ge)for(var n of Ge(e))yn.call(e,n)&&Je(t,n,e[n]);return t},z=(t,e)=>bn(t,En(e));var Rs=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var vn=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of In(e))!Ye.call(t,i)&&i!==n&&ie(t,i,{get:()=>e[i],enumerable:!(r=_n(e,i))||r.enumerable});return t};var Ms=(t,e,n)=>(n=t!=null?gn(Xe(t)):{},vn(e||!t||!t.__esModule?ie(n,"default",{value:t,enumerable:!0}):n,t));var Bs=(t,e,n)=>wn(Xe(t),n,e);var u=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(f){i(f)}},o=c=>{try{a(n.throw(c))}catch(f){i(f)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Ze=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Tn=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},et={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,m=s>>2,d=(s&3)<<4|a>>4,I=(a&15)<<2|f>>6,V=f&63;c||(V=64,o||(I=64)),r.push(n[m],n[d],n[I],n[V])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ze(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Tn(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let f=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||f==null||d==null)throw new oe;let I=s<<2|a>>4;if(r.push(I),f!==64){let V=a<<4&240|f>>2;if(r.push(V),d!==64){let mn=f<<6&192|d;r.push(mn)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},oe=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Sn=function(t){let e=Ze(t);return et.encodeByteArray(e,!0)},F=function(t){return Sn(t).replace(/\./g,"")},An=function(t){try{return et.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Cn=()=>Dn().__FIREBASE_DEFAULTS__,On=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Nn=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&An(t[1]);return e&&JSON.parse(e)},ce=()=>{try{return Cn()||On()||Nn()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rn=t=>{var e,n;return(n=(e=ce())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xs=t=>{let e=Rn(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ue=()=>{var t;return(t=ce())===null||t===void 0?void 0:t.config},ks=t=>{var e;return(e=ce())===null||e===void 0?void 0:e[`_${t}`]};var W=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ls(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[F(JSON.stringify(n)),F(JSON.stringify(o)),a].join(".")}function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fs(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function Us(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $s(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function js(){let t=tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function q(){try{return typeof indexedDB=="object"}catch{return!1}}function K(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function nt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var Mn="FirebaseError",v=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Mn,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}},T=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Bn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new v(i,a,r)}};function Bn(t,e){return t.replace(Pn,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Pn=/\{\$([^}]+)}/g;function Vs(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function x(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Qe(s)&&Qe(o)){if(!x(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Qe(t){return t!==null&&typeof t=="object"}function Hs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zs(t,e){let n=new ae(t,e);return n.subscribe.bind(n)}var ae=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xn(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=se),i.error===void 0&&(i.error=se),i.complete===void 0&&(i.complete=se);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function xn(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function se(){}var kn=1e3,Ln=2,Fn=4*60*60*1e3,Un=.5;function Ws(t,e=kn,n=Ln){let r=e*Math.pow(n,t),i=Math.round(Un*r*(Math.random()-.5)*2);return Math.min(Fn,r+i)}function G(t){return t&&t._delegate?t._delegate:t}var $n=[],l=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(l||{}),jn={debug:l.DEBUG,verbose:l.VERBOSE,info:l.INFO,warn:l.WARN,error:l.ERROR,silent:l.SILENT},Vn=l.INFO,Hn={[l.DEBUG]:"log",[l.VERBOSE]:"log",[l.INFO]:"info",[l.WARN]:"warn",[l.ERROR]:"error"},zn=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Hn[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},k=class{constructor(e){this.name=e,this._logLevel=Vn,this._logHandler=zn,this._userLogHandler=null,$n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in l))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,l.DEBUG,...e),this._logHandler(this,l.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,l.VERBOSE,...e),this._logHandler(this,l.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,l.INFO,...e),this._logHandler(this,l.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,l.WARN,...e),this._logHandler(this,l.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,l.ERROR,...e),this._logHandler(this,l.ERROR,...e)}};var b=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var O="[DEFAULT]";var fe=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new W;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qn(e))try{this.getOrInitializeService({instanceIdentifier:O})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=O){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return u(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=O){return this.instances.has(e)}getOptions(e=O){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wn(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=O){return this.component?this.component.multipleInstances?e:O:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Wn(t){return t===O?void 0:t}function qn(t){return t.instantiationMode==="EAGER"}var J=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new fe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Kn=(t,e)=>e.some(n=>t instanceof n),rt,it;function Gn(){return rt||(rt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jn(){return it||(it=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var st=new WeakMap,de=new WeakMap,ot=new WeakMap,le=new WeakMap,pe=new WeakMap;function Xn(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&st.set(n,t)}).catch(()=>{}),pe.set(e,t),e}function Yn(t){if(de.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});de.set(t,e)}var he={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return de.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ot.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function at(t){he=t(he)}function Qn(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(X(this),e,...n);return ot.set(r,e.sort?e.sort():[e]),_(r)}:Jn().includes(t)?function(...e){return t.apply(X(this),e),_(st.get(this))}:function(...e){return _(t.apply(X(this),e))}}function Zn(t){return typeof t=="function"?Qn(t):(t instanceof IDBTransaction&&Yn(t),Kn(t,Gn())?new Proxy(t,he):t)}function _(t){if(t instanceof IDBRequest)return Xn(t);if(le.has(t))return le.get(t);let e=Zn(t);return e!==t&&(le.set(t,e),pe.set(e,t)),e}var X=t=>pe.get(t);function ut(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=_(o);return r&&o.addEventListener("upgradeneeded",c=>{r(_(o.result),c.oldVersion,c.newVersion,_(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),a}function Zs(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),_(n).then(()=>{})}var er=["get","getKey","getAll","getAllKeys","count"],tr=["put","add","delete","clear"],me=new Map;function ct(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(me.get(e))return me.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=tr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||er.includes(n)))return;let s=function(o,...a){return u(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),f=c.store;return r&&(f=f.index(a.shift())),(yield Promise.all([f[n](...a),i&&c.done]))[0]})};return me.set(e,s),s}at(t=>z(H({},t),{get:(e,n,r)=>ct(e,n)||t.get(e,n,r),has:(e,n)=>!!ct(e,n)||t.has(e,n)}));var be=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nr(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function nr(t){let e=t.getComponent();return e?.type==="VERSION"}var _e="@firebase/app",ft="0.9.25";var N=new k("@firebase/app"),rr="@firebase/app-compat",ir="@firebase/analytics-compat",sr="@firebase/analytics",or="@firebase/app-check-compat",ar="@firebase/app-check",cr="@firebase/auth",ur="@firebase/auth-compat",fr="@firebase/database",lr="@firebase/database-compat",dr="@firebase/functions",hr="@firebase/functions-compat",pr="@firebase/installations",mr="@firebase/installations-compat",gr="@firebase/messaging",br="@firebase/messaging-compat",_r="@firebase/performance",Er="@firebase/performance-compat",Ir="@firebase/remote-config",yr="@firebase/remote-config-compat",wr="@firebase/storage",vr="@firebase/storage-compat",Tr="@firebase/firestore",Sr="@firebase/firestore-compat",Ar="firebase",Dr="10.7.1";var Ee="[DEFAULT]",Cr={[_e]:"fire-core",[rr]:"fire-core-compat",[sr]:"fire-analytics",[ir]:"fire-analytics-compat",[ar]:"fire-app-check",[or]:"fire-app-check-compat",[cr]:"fire-auth",[ur]:"fire-auth-compat",[fr]:"fire-rtdb",[lr]:"fire-rtdb-compat",[dr]:"fire-fn",[hr]:"fire-fn-compat",[pr]:"fire-iid",[mr]:"fire-iid-compat",[gr]:"fire-fcm",[br]:"fire-fcm-compat",[_r]:"fire-perf",[Er]:"fire-perf-compat",[Ir]:"fire-rc",[yr]:"fire-rc-compat",[wr]:"fire-gcs",[vr]:"fire-gcs-compat",[Tr]:"fire-fst",[Sr]:"fire-fst-compat","fire-js":"fire-js",[Ar]:"fire-js-all"};var U=new Map,Ie=new Map;function Or(t,e){try{t.container.addComponent(e)}catch(n){N.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function D(t){let e=t.name;if(Ie.has(e))return N.debug(`There were multiple attempts to register component ${e}.`),!1;Ie.set(e,t);for(let n of U.values())Or(n,t);return!0}function L(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var Nr={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},A=new T("app","Firebase",Nr);var ye=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new b("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw A.create("app-deleted",{appName:this._name})}};var uo=Dr;function Rr(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ee,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw A.create("bad-app-name",{appName:String(i)});if(n||(n=ue()),!n)throw A.create("no-options");let s=U.get(i);if(s){if(x(n,s.options)&&x(r,s.config))return s;throw A.create("duplicate-app",{appName:i})}let o=new J(i);for(let c of Ie.values())o.addComponent(c);let a=new ye(n,r,o);return U.set(i,a),a}function Te(t=Ee){let e=U.get(t);if(!e&&t===Ee&&ue())return Rr();if(!e)throw A.create("no-app",{appName:t});return e}function fo(){return Array.from(U.values())}function S(t,e,n){var r;let i=(r=Cr[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),N.warn(a.join(" "));return}D(new b(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Mr="firebase-heartbeat-database",Br=1,$="firebase-heartbeat-store",ge=null;function pt(){return ge||(ge=ut(Mr,Br,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($)}}}).catch(t=>{throw A.create("idb-open",{originalErrorMessage:t.message})})),ge}function Pr(t){return u(this,null,function*(){try{return yield(yield pt()).transaction($).objectStore($).get(mt(t))}catch(e){if(e instanceof v)N.warn(e.message);else{let n=A.create("idb-get",{originalErrorMessage:e?.message});N.warn(n.message)}}})}function lt(t,e){return u(this,null,function*(){try{let r=(yield pt()).transaction($,"readwrite");yield r.objectStore($).put(e,mt(t)),yield r.done}catch(n){if(n instanceof v)N.warn(n.message);else{let r=A.create("idb-set",{originalErrorMessage:n?.message});N.warn(r.message)}}})}function mt(t){return`${t.name}!${t.options.appId}`}var xr=1024,kr=30*24*60*60*1e3,we=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ve(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return u(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dt();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=kr}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return u(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=dt(),{heartbeatsToSend:r,unsentEntries:i}=Lr(this._heartbeatsCache.heartbeats),s=F(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function dt(){return new Date().toISOString().substring(0,10)}function Lr(t,e=xr){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ht(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ht(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ve=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return u(this,null,function*(){return q()?K().then(()=>!0).catch(()=>!1):!1})}read(){return u(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Pr(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return lt(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return lt(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function ht(t){return F(JSON.stringify({version:2,heartbeats:t})).length}function Fr(t){D(new b("platform-logger",e=>new be(e),"PRIVATE")),D(new b("heartbeat",e=>new we(e),"PRIVATE")),S(_e,ft,t),S(_e,ft,"esm2017"),S("fire-js","")}Fr("");var Ur=(t,e)=>e.some(n=>t instanceof n),gt,bt;function $r(){return gt||(gt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jr(){return bt||(bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _t=new WeakMap,Ae=new WeakMap,Et=new WeakMap,Se=new WeakMap,Ce=new WeakMap;function Vr(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(y(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_t.set(n,t)}).catch(()=>{}),Ce.set(e,t),e}function Hr(t){if(Ae.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ae.set(t,e)}var De={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ae.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Et.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function It(t){De=t(De)}function zr(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Y(this),e,...n);return Et.set(r,e.sort?e.sort():[e]),y(r)}:jr().includes(t)?function(...e){return t.apply(Y(this),e),y(_t.get(this))}:function(...e){return y(t.apply(Y(this),e))}}function Wr(t){return typeof t=="function"?zr(t):(t instanceof IDBTransaction&&Hr(t),Ur(t,$r())?new Proxy(t,De):t)}function y(t){if(t instanceof IDBRequest)return Vr(t);if(Se.has(t))return Se.get(t);let e=Wr(t);return e!==t&&(Se.set(t,e),Ce.set(e,t)),e}var Y=t=>Ce.get(t);function wt(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=y(o);return r&&o.addEventListener("upgradeneeded",c=>{r(y(o.result),c.oldVersion,c.newVersion,y(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}var qr=["get","getKey","getAll","getAllKeys","count"],Kr=["put","add","delete","clear"],Oe=new Map;function yt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Oe.get(e))return Oe.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Kr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qr.includes(n)))return;let s=function(o,...a){return u(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),f=c.store;return r&&(f=f.index(a.shift())),(yield Promise.all([f[n](...a),i&&c.done]))[0]})};return Oe.set(e,s),s}It(t=>z(H({},t),{get:(e,n,r)=>yt(e,n)||t.get(e,n,r),has:(e,n)=>!!yt(e,n)||t.has(e,n)}));var St="@firebase/installations",Be="0.6.4";var At=1e4,Dt=`w:${Be}`,Ct="FIS_v2",Gr="https://firebaseinstallations.googleapis.com/v1",Jr=60*60*1e3,Xr="installations",Yr="Installations";var Qr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},M=new T(Xr,Yr,Qr);function Ot(t){return t instanceof v&&t.code.includes("request-failed")}function Nt({projectId:t}){return`${Gr}/projects/${t}/installations`}function Rt(t){return{token:t.token,requestStatus:2,expiresIn:ei(t.expiresIn),creationTime:Date.now()}}function Mt(t,e){return u(this,null,function*(){let r=(yield e.json()).error;return M.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function Bt({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Zr(t,{refreshToken:e}){let n=Bt(t);return n.append("Authorization",ti(e)),n}function Pt(t){return u(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function ei(t){return Number(t.replace("s","000"))}function ti(t){return`${Ct} ${t}`}function ni(r,i){return u(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=Nt(t),o=Bt(t),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={fid:n,authVersion:Ct,appId:t.appId,sdkVersion:Dt},f={method:"POST",headers:o,body:JSON.stringify(c)},m=yield Pt(()=>fetch(s,f));if(m.ok){let d=yield m.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Rt(d.authToken)}}else throw yield Mt("Create Installation",m)})}function xt(t){return new Promise(e=>{setTimeout(e,t)})}function ri(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var ii=/^[cdef][\w-]{21}$/,Me="";function si(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=oi(t);return ii.test(n)?n:Me}catch{return Me}}function oi(t){return ri(t).substr(0,22)}function Z(t){return`${t.appName}!${t.appId}`}var kt=new Map;function Lt(t,e){let n=Z(t);Ft(n,e),ai(n,e)}function Ft(t,e){let n=kt.get(t);if(n)for(let r of n)r(e)}function ai(t,e){let n=ci();n&&n.postMessage({key:t,fid:e}),ui()}var R=null;function ci(){return!R&&"BroadcastChannel"in self&&(R=new BroadcastChannel("[Firebase] FID Change"),R.onmessage=t=>{Ft(t.data.key,t.data.fid)}),R}function ui(){kt.size===0&&R&&(R.close(),R=null)}var fi="firebase-installations-database",li=1,B="firebase-installations-store",Ne=null;function Pe(){return Ne||(Ne=wt(fi,li,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(B)}}})),Ne}function Q(t,e){return u(this,null,function*(){let n=Z(t),i=(yield Pe()).transaction(B,"readwrite"),s=i.objectStore(B),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&Lt(t,e.fid),e})}function Ut(t){return u(this,null,function*(){let e=Z(t),r=(yield Pe()).transaction(B,"readwrite");yield r.objectStore(B).delete(e),yield r.done})}function ee(t,e){return u(this,null,function*(){let n=Z(t),i=(yield Pe()).transaction(B,"readwrite"),s=i.objectStore(B),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&Lt(t,a.fid),a})}function xe(t){return u(this,null,function*(){let e,n=yield ee(t.appConfig,r=>{let i=di(r),s=hi(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Me?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function di(t){let e=t||{fid:si(),registrationStatus:0};return $t(e)}function hi(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(M.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=pi(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:mi(t)}:{installationEntry:e}}function pi(t,e){return u(this,null,function*(){try{let n=yield ni(t,e);return Q(t.appConfig,n)}catch(n){throw Ot(n)&&n.customData.serverCode===409?yield Ut(t.appConfig):yield Q(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function mi(t){return u(this,null,function*(){let e=yield vt(t.appConfig);for(;e.registrationStatus===1;)yield xt(100),e=yield vt(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield xe(t);return r||n}return e})}function vt(t){return ee(t,e=>{if(!e)throw M.create("installation-not-found");return $t(e)})}function $t(t){return gi(t)?{fid:t.fid,registrationStatus:0}:t}function gi(t){return t.registrationStatus===1&&t.registrationTime+At<Date.now()}function bi(r,i){return u(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=_i(t,n),o=Zr(t,n),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={installation:{sdkVersion:Dt,appId:t.appId}},f={method:"POST",headers:o,body:JSON.stringify(c)},m=yield Pt(()=>fetch(s,f));if(m.ok){let d=yield m.json();return Rt(d)}else throw yield Mt("Generate Auth Token",m)})}function _i(t,{fid:e}){return`${Nt(t)}/${e}/authTokens:generate`}function ke(t,e=!1){return u(this,null,function*(){let n,r=yield ee(t.appConfig,s=>{if(!jt(s))throw M.create("not-registered");let o=s.authToken;if(!e&&yi(o))return s;if(o.requestStatus===1)return n=Ei(t,e),s;{if(!navigator.onLine)throw M.create("app-offline");let a=vi(s);return n=Ii(t,a),a}});return n?yield n:r.authToken})}function Ei(t,e){return u(this,null,function*(){let n=yield Tt(t.appConfig);for(;n.authToken.requestStatus===1;)yield xt(100),n=yield Tt(t.appConfig);let r=n.authToken;return r.requestStatus===0?ke(t,e):r})}function Tt(t){return ee(t,e=>{if(!jt(e))throw M.create("not-registered");let n=e.authToken;return Ti(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Ii(t,e){return u(this,null,function*(){try{let n=yield bi(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Q(t.appConfig,r),n}catch(n){if(Ot(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield Ut(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Q(t.appConfig,r)}throw n}})}function jt(t){return t!==void 0&&t.registrationStatus===2}function yi(t){return t.requestStatus===2&&!wi(t)}function wi(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Jr}function vi(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Ti(t){return t.requestStatus===1&&t.requestTime+At<Date.now()}function Si(t){return u(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield xe(e);return r?r.catch(console.error):ke(e).catch(console.error),n.fid})}function Ai(t,e=!1){return u(this,null,function*(){let n=t;return yield Di(n),(yield ke(n,e)).token})}function Di(t){return u(this,null,function*(){let{registrationPromise:e}=yield xe(t);e&&(yield e)})}function Ci(t){if(!t||!t.options)throw Re("App Configuration");if(!t.name)throw Re("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Re(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Re(t){return M.create("missing-app-config-values",{valueName:t})}var Vt="installations",Oi="installations-internal",Ni=t=>{let e=t.getProvider("app").getImmediate(),n=Ci(e),r=L(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Ri=t=>{let e=t.getProvider("app").getImmediate(),n=L(e,Vt).getImmediate();return{getId:()=>Si(n),getToken:i=>Ai(n,i)}};function Mi(){D(new b(Vt,Ni,"PUBLIC")),D(new b(Oi,Ri,"PRIVATE"))}Mi();S(St,Be);S(St,Be,"esm2017");var Ht="@firebase/performance",Ve="0.6.4";var Qt=Ve,Bi="FB-PERF-TRACE-START",Pi="FB-PERF-TRACE-STOP",He="FB-PERF-TRACE-MEASURE",Zt="_wt_",en="_fp",tn="_fcp",nn="_fid",rn="@firebase/performance/config",sn="@firebase/performance/configexpire",xi="performance",on="Performance";var ki={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},p=new T(xi,on,ki);var w=new k(on);w.logLevel=l.INFO;var Le,an,h=class t{constructor(e){if(this.window=e,!e)throw p.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!nt()?(w.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):q()?!0:(w.info("IndexedDB is not supported by current browswer"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(let s of i.getEntries())n(s)}).observe({entryTypes:[e]})}static getInstance(){return Le===void 0&&(Le=new t(an)),Le}};function Li(t){an=t}var cn;function Fi(t){let e=t.getId();return e.then(n=>{cn=n}),e}function We(){return cn}function Ui(t){let e=t.getToken();return e.then(n=>{}),e}function zt(t,e){let n=t.length-e.length;if(n<0||n>1)throw p.create("invalid String merger input");let r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Fe,g=class t{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=zt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=zt("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Fe===void 0&&(Fe=new t),Fe}};var j=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}(j||{}),$i=["firebase_","google_","ga_"],ji=new RegExp("^[a-zA-Z]\\w*$"),Vi=40,Hi=100;function zi(){let t=h.getInstance().navigator;return t?.serviceWorker?t.serviceWorker.controller?2:3:1}function un(){switch(h.getInstance().document.visibilityState){case"visible":return j.VISIBLE;case"hidden":return j.HIDDEN;default:return j.UNKNOWN}}function Wi(){let e=h.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function qi(t){return t.length===0||t.length>Vi?!1:!$i.some(n=>t.startsWith(n))&&!!t.match(ji)}function Ki(t){return t.length!==0&&t.length<=Hi}function fn(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.appId;if(!n)throw p.create("no app id");return n}function Gi(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!n)throw p.create("no project id");return n}function Ji(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!n)throw p.create("no api key");return n}var Xi="0.0.1",E={loggingEnabled:!0},Yi="FIREBASE_INSTALLATIONS_AUTH";function Qi(t,e){let n=Zi();return n?(Wt(n),Promise.resolve()):ns(t,e).then(Wt).then(r=>es(r),()=>{})}function Zi(){let t=h.getInstance().localStorage;if(!t)return;let e=t.getItem(sn);if(!e||!rs(e))return;let n=t.getItem(rn);if(n)try{return JSON.parse(n)}catch{return}}function es(t){let e=h.getInstance().localStorage;!t||!e||(e.setItem(rn,JSON.stringify(t)),e.setItem(sn,String(Date.now()+g.getInstance().configTimeToLive*60*60*1e3)))}var ts="Could not fetch config, will use default configs";function ns(t,e){return Ui(t.installations).then(n=>{let r=Gi(t.app),i=Ji(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${Yi} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:fn(t.app),app_version:Qt,sdk_version:Xi})});return fetch(o).then(a=>{if(a.ok)return a.json();throw p.create("RC response not ok")})}).catch(()=>{w.info(ts)})}function Wt(t){if(!t)return t;let e=g.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=E.loggingEnabled,n.fpr_log_source?e.logSource=Number(n.fpr_log_source):E.logSource&&(e.logSource=E.logSource),n.fpr_log_endpoint_url?e.logEndPointUrl=n.fpr_log_endpoint_url:E.logEndPointUrl&&(e.logEndPointUrl=E.logEndPointUrl),n.fpr_log_transport_key?e.transportKey=n.fpr_log_transport_key:E.transportKey&&(e.transportKey=E.transportKey),n.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):E.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=E.networkRequestsSamplingRate),n.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):E.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=E.tracesSamplingRate),e.logTraceAfterSampling=qt(e.tracesSamplingRate),e.logNetworkAfterSampling=qt(e.networkRequestsSamplingRate),t}function rs(t){return Number(t)>Date.now()}function qt(t){return Math.random()<=t}var qe=1,Ue;function ln(t){return qe=2,Ue=Ue||ss(t),Ue}function is(){return qe===3}function ss(t){return os().then(()=>Fi(t.installations)).then(e=>Qi(t,e)).then(()=>Kt(),()=>Kt())}function os(){let t=h.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){let n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function Kt(){qe=3}var Ke=10*1e3,as=5.5*1e3,dn=3,cs=1e3,ne=dn,C=[],Gt=!1;function us(){Gt||(re(as),Gt=!0)}function re(t){setTimeout(()=>{if(ne!==0){if(!C.length)return re(Ke);fs()}},t)}function fs(){let t=C.splice(0,cs),e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:g.getInstance().logSource,log_event:e};ls(n,t).catch(()=>{C=[...t,...C],ne--,w.info(`Tries left: ${ne}.`),re(Ke)})}function ls(t,e){return ds(t).then(n=>(n.ok||w.info("Call to Firebase backend failed."),n.json())).then(n=>{let r=Number(n.nextRequestWaitMillis),i=Ke;isNaN(r)||(i=Math.max(r,i));let s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(C=[...e,...C],w.info("Retry transport request later.")),ne=dn,re(i)})}function ds(t){let e=g.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function hs(t){if(!t.eventTime||!t.message)throw p.create("invalid cc log");C=[...C,t]}function ps(t){return(...e)=>{let n=t(...e);hs({message:n,eventTime:Date.now()})}}var $e;function hn(t,e){$e||($e=ps(gs)),$e(t,e)}function te(t){let e=g.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||h.getInstance().requiredApisAvailable()&&(t.isAuto&&un()!==j.VISIBLE||(is()?je(t):ln(t.performanceController).then(()=>je(t),()=>je(t))))}function je(t){if(!We())return;let e=g.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>hn(t,1),0)}function ms(t){let e=g.getInstance();if(!e.instrumentationEnabled)return;let n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>hn(t,0),0)}function gs(t,e){return e===0?bs(t):_s(t)}function bs(t){let e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:pn(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function _s(t){let e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);let n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);let r={application_info:pn(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function pn(t){return{google_app_id:fn(t),app_instance_id:We(),web_app_info:{sdk_version:Qt,page_url:h.getInstance().getUrl(),service_worker_status:zi(),visibility_state:un(),effective_connection_type:Wi()},application_process_state:0}}var Es=100,Is="_",ys=[en,tn,nn];function ws(t,e){return t.length===0||t.length>Es?!1:e&&e.startsWith(Zt)&&ys.indexOf(t)>-1||!t.startsWith(Is)}function vs(t){let e=Math.floor(t);return e<t&&w.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}var P=class t{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=h.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${Bi}-${this.randomId}-${this.name}`,this.traceStopMark=`${Pi}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${He}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw p.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw p.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),te(this)}record(e,n,r){if(e<=0)throw p.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw p.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(let i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));te(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(ws(e,this.name))this.counters[e]=vs(n??0);else throw p.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){let r=qi(e),i=Ki(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw p.create("invalid attribute name",{attributeName:e});if(!i)throw p.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){let e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i){let s=h.getInstance().getUrl();if(!s)return;let o=new t(e,Zt+s,!0),a=Math.floor(h.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),n&&n[0]&&(o.setDuration(Math.floor(n[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));let c="first-paint",f="first-contentful-paint";if(r){let m=r.find(I=>I.name===c);m&&m.startTime&&o.putMetric(en,Math.floor(m.startTime*1e3));let d=r.find(I=>I.name===f);d&&d.startTime&&o.putMetric(tn,Math.floor(d.startTime*1e3)),i&&o.putMetric(nn,Math.floor(i*1e3))}te(o)}static createUserTimingTrace(e,n){let r=new t(e,n,!1,n);te(r)}};function Jt(t,e){let n=e;if(!n||n.responseStart===void 0)return;let r=h.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),s=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],c={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};ms(c)}var Ts=5e3;function Xt(t){We()&&(setTimeout(()=>As(t),0),setTimeout(()=>Ss(t),0),setTimeout(()=>Ds(t),0))}function Ss(t){let e=h.getInstance(),n=e.getEntriesByType("resource");for(let r of n)Jt(t,r);e.setupObserver("resource",r=>Jt(t,r))}function As(t){let e=h.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{P.createOobTrace(t,n,r),i=void 0},Ts);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),P.createOobTrace(t,n,r,s))})}else P.createOobTrace(t,n,r)}function Ds(t){let e=h.getInstance(),n=e.getEntriesByType("measure");for(let r of n)Yt(t,r);e.setupObserver("measure",r=>Yt(t,r))}function Yt(t,e){let n=e.name;n.substring(0,He.length)!==He&&P.createUserTimingTrace(t,n)}var ze=class{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),h.getInstance().requiredApisAvailable()?K().then(n=>{n&&(us(),ln(this).then(()=>Xt(this),()=>Xt(this)),this.initialized=!0)}).catch(n=>{w.info(`Environment doesn't support IndexedDB: ${n}`)}):w.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){g.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return g.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){g.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return g.getInstance().dataCollectionEnabled}},Cs="[DEFAULT]";function Ro(t=Te()){return t=G(t),L(t,"performance").getImmediate()}function Mo(t,e){t=G(t);let n=L(t,"performance");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(x(s,e??{}))return i;throw p.create("already initialized")}return n.initialize({options:e})}function Bo(t,e){return t=G(t),new P(t,e)}var Os=(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==Cs)throw p.create("FB not default");if(typeof window>"u")throw p.create("no window");Li(window);let i=new ze(n,r);return i._init(e),i};function Ns(){D(new b("performance",Os,"PUBLIC")),S(Ht,Ve),S(Ht,Ve,"esm2017")}Ns();export{H as a,z as b,Rs as c,Ms as d,Bs as e,u as f,An as g,Rn as h,xs as i,ks as j,Ls as k,tt as l,Fs as m,Us as n,$s as o,js as p,q,K as r,nt as s,v as t,T as u,Vs as v,x as w,Hs as x,zs as y,Ws as z,G as A,b as B,l as C,k as D,ut as E,Zs as F,D as G,L as H,uo as I,Rr as J,Te as K,fo as L,S as M,Ro as N,Mo as O,Bo as P};
